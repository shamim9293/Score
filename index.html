<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Cricket Scorer Pro</title>
    <style>
        :root { --primary: #075e54; --accent: #25d366; --bg: #e5ddd5; --white: #ffffff; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); margin: 0; padding: 0; }
        .header { background: var(--primary); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        
        /* Score Board */
        .board { background: var(--white); margin: 10px; border-radius: 8px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .score-row { display: flex; justify-content: space-between; align-items: flex-end; }
        .total-runs { font-size: 48px; font-weight: bold; color: #000; }
        .overs-text { font-size: 18px; color: #555; margin-bottom: 8px; }
        .target-text { color: #d32f2f; font-weight: bold; font-size: 14px; }

        /* Stats Table */
        .stats-table { width: calc(100% - 20px); margin: 0 10px; background: white; border-collapse: collapse; border-radius: 8px; overflow: hidden; font-size: 14px; }
        .stats-table th { background: #f5f5f5; padding: 10px; text-align: left; color: #666; }
        .stats-table td { padding: 12px 10px; border-bottom: 1px solid #eee; }
        .active-row { background: #dcf8c6; font-weight: bold; }

        /* Current Over History */
        .over-history { background: white; margin: 10px; padding: 10px; border-radius: 8px; display: flex; gap: 5px; align-items: center; min-height: 40px; overflow-x: auto; }
        .ball-circle { width: 30px; height: 30px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; flex-shrink: 0; }
        .ball-w { background: #ffcdd2; color: #c62828; }
        .ball-boundary { background: #c8e6c9; color: #2e7d32; }

        /* Keypad */
        .keypad { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 10px; background: #ddd; position: fixed; bottom: 0; width: 100%; box-sizing: border-box; }
        button { padding: 15px 5px; border: none; border-radius: 4px; font-size: 18px; font-weight: bold; cursor: pointer; background: white; }
        button:active { background: #ccc; }
        .k-run { color: #000; }
        .k-ex { color: #1565c0; }
        .k-out { background: #d32f2f; color: white; grid-column: span 2; }
        .k-undo { background: #546e7a; color: white; grid-column: span 2; }
    </style>
</head>
<body>

<div class="header">
    <span id="team-display" onclick="edit('team-display')">TEAM A</span>
    <button onclick="location.reload()" style="background:none; border:1px solid white; color:white; font-size:12px; padding:5px;">NEW MATCH</button>
</div>

<div class="board">
    <div id="target-ui" class="target-text" style="display:none;">TARGET: <span id="target-val">0</span></div>
    <div class="score-row">
        <div class="total-runs"><span id="tr">0</span>/<span id="tw">0</span></div>
        <div class="overs-text">Over: <span id="ov">0</span>.<span id="bl">0</span></div>
    </div>
</div>

<table class="stats-table">
    <tr><th>Batsman</th><th>R</th><th>B</th><th>4s</th><th>6s</th></tr>
    <tr id="row1" class="active-row"><td onclick="edit('n1')" id="n1">Striker*</td><td id="r1">0</td><td id="b1">0</td><td id="f1">0</td><td id="s1">0</td></tr>
    <tr id="row2"><td onclick="edit('n2')" id="n2">Non-Striker</td><td id="r2">0</td><td id="b2">0</td><td id="f2">0</td><td id="s2">0</td></tr>
</table>

<div class="stats-table" style="margin-top:10px; padding:10px; background:white; display:flex; justify-content:space-between; align-items:center;">
    <span onclick="edit('bowler-n')">Bowler: <b id="bowler-n">Bowler Name</b></span>
    <span>O: <b id="bow-ov">0.0</b> R: <b id="bow-r">0</b> W: <b id="bow-w">0</b></span>
</div>

<div class="over-history" id="over-ui">
    <span style="font-size:12px; color:#999; margin-right:5px;">This Over:</span>
</div>

<div style="height: 200px;"></div> <div class="keypad">
    <button class="k-run" onclick="addBall(0)">0</button>
    <button class="k-run" onclick="addBall(1)">1</button>
    <button class="k-run" onclick="addBall(2)">2</button>
    <button class="k-run" onclick="addBall(3)">3</button>
    <button class="k-run" onclick="addBall(4)" style="background:#e8f5e9">4</button>
    <button class="k-run" onclick="addBall(6)" style="background:#e8f5e9">6</button>
    <button class="k-ex" onclick="extra('WD')">WD</button>
    <button class="k-ex" onclick="extra('NB')">NB</button>
    <button class="k-undo" onclick="undo()">UNDO</button>
    <button class="k-out" onclick="wicket()">OUT</button>
    <button class="k-ex" onclick="swap()" style="grid-column: span 2; background:#cfd8dc;">SWAP STRIKE</button>
    <button class="k-ex" onclick="endInnings()" style="grid-column: span 2; background:#ffe082;">END INNINGS</button>
</div>

<script>
    let match = { tr:0, tw:0, b:0, s:true, b1:{r:0, b:0, f:0, s:0}, b2:{r:0, b:0, f:0, s:0}, br:0, bb:0, bw:0, h:[], target:null };
    let logs = [];

    function updateUI() {
        document.getElementById('tr').innerText = match.tr;
        document.getElementById('tw').innerText = match.tw;
        document.getElementById('ov').innerText = Math.floor(match.b / 6);
        document.getElementById('bl').innerText = match.b % 6;
        
        document.getElementById('r1').innerText = match.b1.r; document.getElementById('b1').innerText = match.b1.b;
        document.getElementById('f1').innerText = match.b1.f; document.getElementById('s1').innerText = match.b1.s;
        document.getElementById('r2').innerText = match.b2.r; document.getElementById('b2').innerText = match.b2.b;
        document.getElementById('f2').innerText = match.b2.f; document.getElementById('s2').innerText = match.b2.s;

        document.getElementById('row1').className = match.s ? "active-row" : "";
        document.getElementById('row2').className = !match.s ? "active-row" : "";

        document.getElementById('bow-ov').innerText = Math.floor(match.bb / 6) + "." + (match.bb % 6);
        document.getElementById('bow-r').innerText = match.br;
        document.getElementById('bow-w').innerText = match.bw;

        let hUI = document.getElementById('over-ui');
        hUI.innerHTML = '<span style="font-size:12px; color:#999; margin-right:5px;">This Over:</span>';
        match.h.forEach(val => {
            let div = document.createElement('div');
            div.className = "ball-circle " + (val === 'W' ? 'ball-w' : (val >= 4 ? 'ball-boundary' : ''));
            div.innerText = val;
            hUI.appendChild(div);
        });
    }

    function addBall(run) {
        logs.push(JSON.stringify(match));
        match.tr += run; match.b++; match.br += run; match.bb++;
        match.h.push(run);
        let cur = match.s ? match.b1 : match.b2;
        cur.r += run; cur.b++;
        if(run === 4) cur.f++; if(run === 6) cur.s++;
        if(run % 2 !== 0) swap();
        if(match.b % 6 === 0) { alert("Over Completed!"); swap(); match.h = []; match.bb = 0; match.br = 0; }
        updateUI();
    }

    function extra(type) {
        logs.push(JSON.stringify(match));
        match.tr++; match.br++; match.h.push(type);
        updateUI();
    }

    function wicket() {
        logs.push(JSON.stringify(match));
        match.tw++; match.b++; match.bb++; match.bw++; match.h.push('W');
        let n = prompt("New Batsman Name:");
        if(match.s) { match.b1 = {r:0, b:0, f:0, s:0}; document.getElementById('n1').innerText = (n || "Striker") + "*"; }
        else { match.b2 = {r:0, b:0, f:0, s:0}; document.getElementById('n2').innerText = n || "Non-Striker"; }
        if(match.b % 6 === 0) { swap(); match.h = []; match.bb = 0; match.br = 0; }
        updateUI();
    }

    function undo() { if(logs.length > 0) { match = JSON.parse(logs.pop()); updateUI(); } }
    function swap() { match.s = !match.s; updateUI(); }
    function edit(id) { let val = prompt("Enter Name:"); if(val) document.getElementById(id).innerText = val; }
    
    function endInnings() {
        match.target = match.tr + 1;
        alert("Innings Ended. Target: " + match.target);
        document.getElementById('target-ui').style.display = "block";
        document.getElementById('target-val').innerText = match.target;
        // Reset for 2nd Innings
        match.tr = 0; match.tw = 0; match.b = 0; match.h = [];
        updateUI();
    }

    window.onload = updateUI;
</script>
</body>
</html>